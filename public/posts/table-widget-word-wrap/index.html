<!doctype html><html lang=pt dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Quebra de Texto num Widget de Table usando QWidget | danieltak</title>
<meta name=keywords content="Qt,GUI,Tabela"><meta name=description content="Word Wrap no Table Widget do Qt"><meta name=author content="danieltak"><link rel=canonical href=https://danieltak.com.br/posts/table-widget-word-wrap/><meta name=google-site-verification content="G-42TTSQCNKE"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://danieltak.com.br/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://danieltak.com.br/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://danieltak.com.br/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://danieltak.com.br/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://danieltak.com.br/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=pt href=https://danieltak.com.br/posts/table-widget-word-wrap/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css integrity=sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js integrity=sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js integrity=sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05 crossorigin=anonymous></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}],throwOnError:!1})})</script><meta property="og:title" content="Quebra de Texto num Widget de Table usando QWidget"><meta property="og:description" content="Word Wrap no Table Widget do Qt"><meta property="og:type" content="article"><meta property="og:url" content="https://danieltak.com.br/posts/table-widget-word-wrap/"><meta property="og:image" content="https://danieltak.com.br/%3Cimage%20path/url%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-27T23:11:32-03:00"><meta property="article:modified_time" content="2024-02-27T23:11:32-03:00"><meta property="og:site_name" content="danieltak"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://danieltak.com.br/%3Cimage%20path/url%3E"><meta name=twitter:title content="Quebra de Texto num Widget de Table usando QWidget"><meta name=twitter:description content="Word Wrap no Table Widget do Qt"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://danieltak.com.br/posts/"},{"@type":"ListItem","position":2,"name":"Quebra de Texto num Widget de Table usando QWidget","item":"https://danieltak.com.br/posts/table-widget-word-wrap/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Quebra de Texto num Widget de Table usando QWidget","name":"Quebra de Texto num Widget de Table usando QWidget","description":"Word Wrap no Table Widget do Qt","keywords":["Qt","GUI","Tabela"],"articleBody":"Introdução O word wrapping automático do Qt utilizando alguns flags funcionava corretamente na classe QTableWidget, porém outras propriedades não eram atendidas ao usar a classe padrão, para personalizar e contornar os delegates podem ser usados.\nPela minha experiência, o QTableWidget é muito limitado, para um widget tão complexo como a tabela, dificilmente você criará uma classe que atenderá à todos requisitos de tabelas de um projeto inteiro e eventualmente você precisará criar um delegate para implementar funcionalidades personalizadas.\nA solução foi criar um QStyledItemDelegate e sobrecarregar a função sizeHint calculando o tamanho usando o tamanho da fonte e a largura de cada coluna.\nFlags O enum do Modo de Word Wrap pode ser utilizado numa classe QLabel, em que as opções a seguir não funcionaram numa classe QtableWidget, você pode adicionar um QLabel ao cellWidget de uma tabela, mas não é a maneira mais recomendada.\nConstante Valor Descrição QTextOption::NoWrap 0 O texto não é quebrado automaticamente. QTextOption::WordWrap 1 O texto é quebrado nos limites das palavras. QTextOption::ManualWrap 2 O mesmo de QTextOption::NoWrap QTextOption::WrapAnywhere 3 O texto pode ser quebrado em qualquer ponto de uma linha, mesmo que ocorra no meio de uma palavra. QTextOption::WrapAtWordBoundaryOrAnywhere 4 Se possível, a quebra ocorre no limite de uma palavra; caso contrário, ocorrerá no ponto apropriado da linha, mesmo no meio de uma palavra. Classe Padrão Usando a função setWordWrap( bool on ) da classe QTableView, isso é possível e a função resizeRowsToContents() é usada para redimensionar as linhas.\nUm exemplo de código que exemplifica o problema pode ser visto no repositório do Github.\nNo código abaixo strings aleatórias são geradas num QTableWidget 5 x 5, com 8 palavras de contendo 5 letras, em cada célula da tabela.\n// Arquivo .cpp, os arquivos .h e .ui e o main podem ser vistos no exemplo de código completo #include \"mainwindow.h\" #include \"./ui_mainwindow.h\" #include #include #include MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent) , ui(new Ui::MainWindow) { ui-\u003esetupUi(this); setWindowTitle( \"Word Wrap Function\" ); QTableWidget *tableWidget = new QTableWidget (5, 5, ui-\u003ecentralwidget); tableWidget-\u003esetGeometry( 0, 0, 640, 480 ); tableWidget-\u003esetWordWrap(true); int width = 100; for( int row = 0; row \u003c tableWidget-\u003erowCount(); row++ ) { for( int column = 0; column \u003c tableWidget-\u003ecolumnCount(); column++ ) { QString randomString = GetRandomString(); QTableWidgetItem* tableItem = tableWidget-\u003eitem( row, column ); if( tableItem == nullptr ) { tableItem = new QTableWidgetItem( randomString ); tableWidget-\u003esetItem( row, column, tableItem ); } else { tableItem-\u003esetText( randomString ); } tableWidget-\u003esetColumnWidth(column, width); tableWidget-\u003ehorizontalHeader()-\u003eresizeSection(column, width); } } tableWidget-\u003eresizeRowsToContents(); } QString MainWindow::GetRandomString() const { const QString possibleCharacters(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"); const int randomWordLength = 5; const int randomWordCount = 8; QString randomString; for( int wordCount = 0; wordCount \u003c randomWordCount; ++wordCount ) { for( int wordLength = 0; wordLength \u003c randomWordLength; ++wordLength ) { int index = QRandomGenerator::global()-\u003egenerate() % possibleCharacters.length(); QChar nextChar = possibleCharacters.at(index); randomString.append(nextChar); } randomString.append(\" \"); } return randomString; } MainWindow::~MainWindow() { delete ui; } Delegate Um delegate é um tipo que representa referências a métodos com uma lista de parâmetros e um tipo de retorno específicos. Ao instanciar um delegate, você pode associar sua instância a qualquer método com uma assinatura e um tipo de retorno compatíveis. Você pode invocar (ou chamar) o método por meio da instância delegate.\nOs delegates são usados para passar métodos como argumentos para outros métodos. Os manipuladores de eventos nada mais são do que métodos que são invocados por meio de delegates.\nQualquer método de qualquer classe ou estrutura acessível que corresponda ao tipo de delegate pode ser atribuído ao delegate. O método pode ser estático ou um método de instância. Essa flexibilidade significa que você pode alterar programaticamente as chamadas de método ou inserir novos códigos em classes existentes.\nEssa capacidade de se referir a um método como parâmetro torna os delegates ideais para definir métodos de retorno de chamada. Você pode escrever um método que compare dois objetos em seu aplicativo. Esse método pode ser usado em um delegate para um algoritmo de classificação. Como o código de comparação é separado da biblioteca, o método de classificação pode ser mais geral.\nQAbstractItemDelegate Um QAbstractItemDelegate fornece a interface e a funcionalidade comum para delegates na arquitetura de model/view. Os delegates exibem itens individuais em exibições e manipulam a edição de dados do modelo.\nA classe QAbstractItemDelegate é uma das classes de Model/View e faz parte da estrutura de model/view do Qt.\nPara renderizar um item de forma personalizada, você deve reimplementar paint() e sizeHint(). A classe QStyledItemDelegate fornece implementações padrão para essas funções.\nExemplo de Código Muitas vezes você precisa controlar as cores, as bordas, as margens, entre outros parâmetros da tabela. Para realizar essa personalização, as funções padrões do Qt não atendem aos requisitos.\nPortanto, é necessário criar classes de Delegate para os itens da tabela, ou seja, cada célula. Também para os itens de header, que não mostraremos nesse exemplo.\nAo modificar muito esse delegate, muitas vezes o wordp wrapping padrão não funcionará ou você necessita de margens personalizadas, o exemplo de delegate completo pode ser visto no repositório do Github.\nUm loop for é usado para cortar a cadeia de caracteres e verificar a largura da cadeia de caracteres cortada usando a fonte atual; se for maior que a largura da coluna, ela será cortada na posição do último espaço.\nPrimeiro a classe MyTableDelegate é criada:\n// header #ifndef MYTABLEDELEGATE_H #define MYTABLEDELEGATE_H #include #include class MyTableDelegate : public QStyledItemDelegate { Q_OBJECT public: explicit MyTableDelegate(QObject *parent = nullptr); void paint(QPainter *painter, const QStyleOptionViewItem \u0026option, const QModelIndex \u0026index) const; virtual QSize sizeHint(const QStyleOptionViewItem \u0026option, const QModelIndex \u0026index) const override; signals: }; #endif // MYTABLEDELEGATE_H // CPP #include \"MyTableDelegate.h\" #include #include #include MyTableDelegate::MyTableDelegate(QObject *parent) : QStyledItemDelegate{parent} {} void MyTableDelegate::paint(QPainter *painter, const QStyleOptionViewItem \u0026option, const QModelIndex \u0026index) const { if (true == index.isValid()) { QStyleOptionViewItem itemOption(option); const QWidget *widget = option.widget; initStyleOption(\u0026itemOption, index); QStyle *style = widget ? widget-\u003estyle() : QApplication::style(); style-\u003edrawControl(QStyle::CE_ItemViewItem, \u0026itemOption, painter, widget); } } QSize MyTableDelegate::sizeHint(const QStyleOptionViewItem \u0026option, const QModelIndex \u0026index) const { int height = 0; int width = 0; const int rowSpacing = 0; if (true == index.isValid()) { QString currentText = index.data().toString(); QTableWidget* parent = static_cast\u003cQTableWidget*\u003e (this-\u003eparent()); if (nullptr != parent) { QFontMetrics metrics(parent-\u003efont()); int fontHeight = parent-\u003efont().pixelSize(); if (true == currentText.isEmpty()) { currentText = \"H\"; } QSize textSize = metrics.size(Qt::TextSingleLine, currentText); int textHeight = textSize.height(); int textWidth = textSize.width(); width = parent-\u003ecolumnWidth(index.column()); if (true == parent-\u003ewordWrap() \u0026\u0026 ( width \u003c= textWidth ) ) { QString qStrSliced; int iStartPos = 0; int iLineCount = 1; for( int iChar = 0; iChar \u003c= currentText.size(); iChar++ ) { qStrSliced = currentText.sliced( iStartPos, iChar - iStartPos ); int iSlicedWidth = metrics.size( Qt::TextSingleLine, qStrSliced ).width(); if( iSlicedWidth \u003e= width ) { int iLastSpacePos = iStartPos; if( true == qStrSliced.contains( QChar::Space ) ) { iLastSpacePos += qStrSliced.lastIndexOf( QChar::Space, -1 ); if ( iLastSpacePos != iStartPos ) { iChar = iLastSpacePos; } } else if( true == qStrSliced.contains( QChar::LineFeed ) ) { iLastSpacePos += qStrSliced.lastIndexOf( QChar::LineFeed, -1 ); if ( iLastSpacePos != iStartPos ) { iChar = iLastSpacePos; } } else { } iStartPos = iChar; iLineCount++; } } height = iLineCount * textHeight; } else { height = ( (currentText.count(\"\\n\") + 1) * fontHeight) + 2; } height += rowSpacing; } } width = std::max( 0, width ); height = std::max( 0, height ); return QSize(width, height); } E uma classe adapter do QTableWidget é criada com nome MyTable:\n// header #ifndef MYTABLE_H #define MYTABLE_H #include class MyTable : public QTableWidget { Q_OBJECT public: explicit MyTable(QWidget *parent = nullptr); QString GetRandomString() const; void PopulateDummyTable(); signals: }; #endif // MYTABLE_H // CPP #include \"MyTable.h\" #include \"MyTableDelegate.h\" #include MyTable::MyTable(QWidget *parent) : QTableWidget{parent} { this-\u003esetItemDelegate( new MyTableDelegate( this ) ); } QString MyTable::GetRandomString() const { const QString possibleCharacters(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\"); const int randomWordLength = 5; const int randomWordCount = 8; QString randomString; for( int wordCount = 0; wordCount \u003c randomWordCount; ++wordCount ) { for( int wordLength = 0; wordLength \u003c randomWordLength; ++wordLength ) { int index = QRandomGenerator::global()-\u003egenerate() % possibleCharacters.length(); QChar nextChar = possibleCharacters.at(index); randomString.append(nextChar); } randomString.append(\" \"); } return randomString; } void MyTable::PopulateDummyTable() { for( int row = 0; row \u003c this-\u003erowCount(); row++ ) { for( int column = 0; column \u003c this-\u003ecolumnCount(); column++ ) { QString randomString = GetRandomString(); QTableWidgetItem* tableItem = this-\u003eitem( row, column ); if( tableItem == nullptr ) { tableItem = new QTableWidgetItem( randomString ); this-\u003esetItem( row, column, tableItem ); } else { tableItem-\u003esetText( randomString ); } } this-\u003esetRowHeight( row, this-\u003esizeHintForRow(row) ); } } A Main Window:\n#include \"mainwindow.h\" #include \"./ui_mainwindow.h\" #include \"MyTable.h\" #include MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent) , ui(new Ui::MainWindow) { ui-\u003esetupUi(this); setWindowTitle( \"Word Wrap Delegate\" ); MyTable *tableWidget = new MyTable ( ui-\u003ecentralwidget ); tableWidget-\u003esetRowCount( 5 ); tableWidget-\u003esetColumnCount( 5 ); tableWidget-\u003esetGeometry( 0, 0, 640, 480 ); const int width = 100; for( int column = 0; column \u003c tableWidget-\u003ecolumnCount(); column++ ) { tableWidget-\u003esetColumnWidth(column, width); tableWidget-\u003ehorizontalHeader()-\u003eresizeSection(column, width); } tableWidget-\u003ePopulateDummyTable(); } MainWindow::~MainWindow() { delete ui; } Resultado O resultado pode ser visto na figura abaixo, em que na esquerda a função do Word Wrap foi utilizada e na direita os delegates.\nCom os delegates o espaçamento da margem ficou mais personalizado e menor, pois a variável rowspacing é igual a zero.\nReferências Wrap Mode Enum QTableWidget Exemplo QTableWidget Exemplo Delegate QAbstractItemDelegate ","wordCount":"1526","inLanguage":"pt","image":"https://danieltak.com.br/%3Cimage%20path/url%3E","datePublished":"2024-02-27T23:11:32-03:00","dateModified":"2024-02-27T23:11:32-03:00","author":{"@type":"Person","name":"danieltak"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://danieltak.com.br/posts/table-widget-word-wrap/"},"publisher":{"@type":"Organization","name":"danieltak","logo":{"@type":"ImageObject","url":"https://danieltak.com.br/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://danieltak.com.br/ accesskey=h title="Home (Alt + H)"><img src=https://danieltak.com.br/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://danieltak.com.br/procurar/ title=Procurar><span>Procurar</span></a></li><li><a href=https://danieltak.com.br/categorias/ title=Categorias><span>Categorias</span></a></li><li><a href=https://danieltak.com.br/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://danieltak.com.br/arquivos/ title=Arquivos><span>Arquivos</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://danieltak.com.br/>Início</a>&nbsp;»&nbsp;<a href=https://danieltak.com.br/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Quebra de Texto num Widget de Table usando QWidget</h1><div class=post-description>Word Wrap no Table Widget do Qt</div><div class=post-meta><span title='2024-02-27 23:11:32 -0300 -03'>27 fev. 2024</span>&nbsp;·&nbsp;8 minutos&nbsp;·&nbsp;1526 palavras&nbsp;·&nbsp;danieltak&nbsp;|&nbsp;<a href=https://github.com/danieltak/danieltak-blog/blob/master/content/posts/table-widget-word-wrap.md rel="noopener noreferrer" target=_blank>Sugerir Alterações</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Conteúdo</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#introdução>Introdução</a></li><li><a href=#flags>Flags</a></li><li><a href=#classe-padrão>Classe Padrão</a></li><li><a href=#delegate>Delegate</a><ul><li><a href=#qabstractitemdelegate>QAbstractItemDelegate</a></li><li><a href=#exemplo-de-código>Exemplo de Código</a></li></ul></li><li><a href=#resultado>Resultado</a></li><li><a href=#referências>Referências</a></li></ul></nav></div></details></div><div class=post-content><h2 id=introdução>Introdução<a hidden class=anchor aria-hidden=true href=#introdução>#</a></h2><p>O word wrapping automático do Qt utilizando alguns flags funcionava corretamente na classe <code>QTableWidget</code>, porém outras propriedades não eram atendidas ao usar a classe padrão, para personalizar e contornar os delegates podem ser usados.</p><p>Pela minha experiência, o <code>QTableWidget</code> é muito limitado, para um widget tão complexo como a tabela, dificilmente você criará uma classe que atenderá à todos requisitos de tabelas de um projeto inteiro e eventualmente você precisará criar um delegate para implementar funcionalidades personalizadas.</p><p>A solução foi criar um <code>QStyledItemDelegate</code> e sobrecarregar a função sizeHint calculando o tamanho usando o tamanho da fonte e a largura de cada coluna.</p><h2 id=flags>Flags<a hidden class=anchor aria-hidden=true href=#flags>#</a></h2><p>O <a href=https://doc.qt.io/qt-6/qtextoption.html#WrapMode-enum>enum do Modo de Word Wrap</a> pode ser utilizado numa classe <code>QLabel</code>, em que as opções a seguir não funcionaram numa classe <a href=https://doc.qt.io/qt-6/qtablewidget.html>QtableWidget</a>, você pode adicionar um QLabel ao cellWidget de uma tabela, mas não é a maneira mais recomendada.</p><table><thead><tr><th>Constante</th><th>Valor</th><th>Descrição</th></tr></thead><tbody><tr><td>QTextOption::NoWrap</td><td>0</td><td>O texto não é quebrado automaticamente.</td></tr><tr><td>QTextOption::WordWrap</td><td>1</td><td>O texto é quebrado nos limites das palavras.</td></tr><tr><td>QTextOption::ManualWrap</td><td>2</td><td>O mesmo de QTextOption::NoWrap</td></tr><tr><td>QTextOption::WrapAnywhere</td><td>3</td><td>O texto pode ser quebrado em qualquer ponto de uma linha, mesmo que ocorra no meio de uma palavra.</td></tr><tr><td>QTextOption::WrapAtWordBoundaryOrAnywhere</td><td>4</td><td>Se possível, a quebra ocorre no limite de uma palavra; caso contrário, ocorrerá no ponto apropriado da linha, mesmo no meio de uma palavra.</td></tr></tbody></table><h2 id=classe-padrão>Classe Padrão<a hidden class=anchor aria-hidden=true href=#classe-padrão>#</a></h2><p>Usando a função <code>setWordWrap( bool on )</code> da classe <code>QTableView</code>, isso é possível e a função <code>resizeRowsToContents()</code> é usada para redimensionar as linhas.</p><p>Um <a href=https://github.com/danieltak/danieltak-blog/blob/master/exemplos/TableWordWrapProblem>exemplo de código</a> que exemplifica o problema pode ser visto no repositório do Github.</p><p>No código abaixo strings aleatórias são geradas num <a href=https://doc.qt.io/qt-6/qtablewidget.html>QTableWidget</a> 5 x 5, com 8 palavras de contendo 5 letras, em cada célula da tabela.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// Arquivo .cpp, os arquivos .h e .ui e o main podem ser vistos no exemplo de código completo
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#include</span> <span class=cpf>&#34;mainwindow.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;./ui_mainwindow.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QHeaderView&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QTableWidget&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QRandomGenerator&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>MainWindow</span><span class=o>::</span><span class=n>MainWindow</span><span class=p>(</span><span class=n>QWidget</span> <span class=o>*</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=n>QMainWindow</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>,</span> <span class=n>ui</span><span class=p>(</span><span class=k>new</span> <span class=n>Ui</span><span class=o>::</span><span class=n>MainWindow</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ui</span><span class=o>-&gt;</span><span class=n>setupUi</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>setWindowTitle</span><span class=p>(</span> <span class=s>&#34;Word Wrap Function&#34;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>QTableWidget</span> <span class=o>*</span><span class=n>tableWidget</span> <span class=o>=</span> <span class=k>new</span> <span class=n>QTableWidget</span> <span class=p>(</span><span class=mi>5</span><span class=p>,</span> <span class=mi>5</span><span class=p>,</span> <span class=n>ui</span><span class=o>-&gt;</span><span class=n>centralwidget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setGeometry</span><span class=p>(</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>640</span><span class=p>,</span> <span class=mi>480</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setWordWrap</span><span class=p>(</span><span class=nb>true</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>row</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>row</span> <span class=o>&lt;</span> <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>rowCount</span><span class=p>();</span> <span class=n>row</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>column</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>column</span> <span class=o>&lt;</span> <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>columnCount</span><span class=p>();</span> <span class=n>column</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>QString</span> <span class=n>randomString</span> <span class=o>=</span> <span class=n>GetRandomString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>QTableWidgetItem</span><span class=o>*</span> <span class=n>tableItem</span> <span class=o>=</span> <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>item</span><span class=p>(</span> <span class=n>row</span><span class=p>,</span> <span class=n>column</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span> <span class=n>tableItem</span> <span class=o>==</span> <span class=k>nullptr</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tableItem</span> <span class=o>=</span> <span class=k>new</span> <span class=n>QTableWidgetItem</span><span class=p>(</span> <span class=n>randomString</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setItem</span><span class=p>(</span> <span class=n>row</span><span class=p>,</span> <span class=n>column</span><span class=p>,</span> <span class=n>tableItem</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tableItem</span><span class=o>-&gt;</span><span class=n>setText</span><span class=p>(</span> <span class=n>randomString</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setColumnWidth</span><span class=p>(</span><span class=n>column</span><span class=p>,</span> <span class=n>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>horizontalHeader</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>resizeSection</span><span class=p>(</span><span class=n>column</span><span class=p>,</span> <span class=n>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>resizeRowsToContents</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>QString</span> <span class=n>MainWindow</span><span class=o>::</span><span class=n>GetRandomString</span><span class=p>()</span> <span class=k>const</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>QString</span> <span class=nf>possibleCharacters</span><span class=p>(</span><span class=s>&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>randomWordLength</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>randomWordCount</span> <span class=o>=</span> <span class=mi>8</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>QString</span> <span class=n>randomString</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>wordCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>wordCount</span> <span class=o>&lt;</span> <span class=n>randomWordCount</span><span class=p>;</span> <span class=o>++</span><span class=n>wordCount</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>wordLength</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>wordLength</span> <span class=o>&lt;</span> <span class=n>randomWordLength</span><span class=p>;</span> <span class=o>++</span><span class=n>wordLength</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>QRandomGenerator</span><span class=o>::</span><span class=n>global</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>generate</span><span class=p>()</span> <span class=o>%</span> <span class=n>possibleCharacters</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>QChar</span> <span class=n>nextChar</span> <span class=o>=</span> <span class=n>possibleCharacters</span><span class=p>.</span><span class=n>at</span><span class=p>(</span><span class=n>index</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>randomString</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>nextChar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>randomString</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>randomString</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>MainWindow</span><span class=o>::~</span><span class=n>MainWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>delete</span> <span class=n>ui</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=delegate>Delegate<a hidden class=anchor aria-hidden=true href=#delegate>#</a></h2><p>Um <code>delegate</code> é um tipo que representa referências a métodos com uma lista de parâmetros e um tipo de retorno específicos. Ao instanciar um <code>delegate</code>, você pode associar sua instância a qualquer método com uma assinatura e um tipo de retorno compatíveis. Você pode invocar (ou chamar) o método por meio da instância <code>delegate</code>.</p><p>Os <code>delegates</code> são usados para passar métodos como argumentos para outros métodos. Os manipuladores de eventos nada mais são do que métodos que são invocados por meio de <code>delegates</code>.</p><p>Qualquer método de qualquer classe ou estrutura acessível que corresponda ao tipo de <code>delegate</code> pode ser atribuído ao <code>delegate</code>. O método pode ser estático ou um método de instância. Essa flexibilidade significa que você pode alterar programaticamente as chamadas de método ou inserir novos códigos em classes existentes.</p><p>Essa capacidade de se referir a um método como parâmetro torna os <code>delegates</code> ideais para definir métodos de retorno de chamada. Você pode escrever um método que compare dois objetos em seu aplicativo. Esse método pode ser usado em um <code>delegate</code> para um algoritmo de classificação. Como o código de comparação é separado da biblioteca, o método de classificação pode ser mais geral.</p><h3 id=qabstractitemdelegate>QAbstractItemDelegate<a hidden class=anchor aria-hidden=true href=#qabstractitemdelegate>#</a></h3><p>Um <a href=https://doc.qt.io/qt-6/qabstractitemdelegate.html>QAbstractItemDelegate</a> fornece a interface e a funcionalidade comum para <code>delegates</code> na arquitetura de model/view. Os <code>delegates</code> exibem itens individuais em exibições e manipulam a edição de dados do modelo.</p><p>A classe <a href=https://doc.qt.io/qt-6/qabstractitemdelegate.html>QAbstractItemDelegate</a> é uma das classes de <a href=https://doc.qt.io/qt-6/model-view-programming.html#model-view-classes>Model/View</a> e faz parte da estrutura de <a href=https://doc.qt.io/qt-6/model-view-programming.html>model/view</a> do Qt.</p><p>Para renderizar um item de forma personalizada, você deve reimplementar <code>paint()</code> e <code>sizeHint()</code>. A classe QStyledItemDelegate fornece implementações padrão para essas funções.</p><h3 id=exemplo-de-código>Exemplo de Código<a hidden class=anchor aria-hidden=true href=#exemplo-de-código>#</a></h3><p>Muitas vezes você precisa controlar as cores, as bordas, as margens, entre outros parâmetros da tabela. Para realizar essa personalização, as funções padrões do Qt não atendem aos requisitos.</p><p>Portanto, é necessário criar classes de <code>Delegate</code> para os itens da tabela, ou seja, cada célula. Também para os itens de header, que não mostraremos nesse exemplo.</p><p>Ao modificar muito esse <code>delegate</code>, muitas vezes o wordp wrapping padrão não funcionará ou você necessita de margens personalizadas, o <a href=https://github.com/danieltak/danieltak-blog/blob/master/exemplos/TableWordWrap>exemplo de delegate</a> completo pode ser visto no repositório do Github.</p><p>Um loop for é usado para cortar a cadeia de caracteres e verificar a largura da cadeia de caracteres cortada usando a fonte atual; se for maior que a largura da coluna, ela será cortada na posição do último espaço.</p><p>Primeiro a classe MyTableDelegate é criada:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// header
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cp>#ifndef MYTABLEDELEGATE_H
</span></span></span><span class=line><span class=cl><span class=cp>#define MYTABLEDELEGATE_H
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QPainter&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QStyledItemDelegate&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyTableDelegate</span> <span class=o>:</span> <span class=k>public</span> <span class=n>QStyledItemDelegate</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Q_OBJECT</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>explicit</span> <span class=n>MyTableDelegate</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>parent</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>paint</span><span class=p>(</span><span class=n>QPainter</span> <span class=o>*</span><span class=n>painter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>               <span class=k>const</span> <span class=n>QStyleOptionViewItem</span> <span class=o>&amp;</span><span class=n>option</span><span class=p>,</span>
</span></span><span class=line><span class=cl>               <span class=k>const</span> <span class=n>QModelIndex</span> <span class=o>&amp;</span><span class=n>index</span><span class=p>)</span> <span class=k>const</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>virtual</span> <span class=n>QSize</span> <span class=nf>sizeHint</span><span class=p>(</span><span class=k>const</span> <span class=n>QStyleOptionViewItem</span> <span class=o>&amp;</span><span class=n>option</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                           <span class=k>const</span> <span class=n>QModelIndex</span> <span class=o>&amp;</span><span class=n>index</span><span class=p>)</span> <span class=k>const</span> <span class=k>override</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nl>signals</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endif </span><span class=c1>// MYTABLEDELEGATE_H
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// CPP
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;MyTableDelegate.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QApplication&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QFontMetrics&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QTableWidget&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>MyTableDelegate</span><span class=o>::</span><span class=n>MyTableDelegate</span><span class=p>(</span><span class=n>QObject</span> <span class=o>*</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=n>QStyledItemDelegate</span><span class=p>{</span><span class=n>parent</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>MyTableDelegate</span><span class=o>::</span><span class=n>paint</span><span class=p>(</span><span class=n>QPainter</span> <span class=o>*</span><span class=n>painter</span><span class=p>,</span> <span class=k>const</span> <span class=n>QStyleOptionViewItem</span> <span class=o>&amp;</span><span class=n>option</span><span class=p>,</span> <span class=k>const</span> <span class=n>QModelIndex</span> <span class=o>&amp;</span><span class=n>index</span><span class=p>)</span> <span class=k>const</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nb>true</span> <span class=o>==</span> <span class=n>index</span><span class=p>.</span><span class=n>isValid</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>QStyleOptionViewItem</span> <span class=nf>itemOption</span><span class=p>(</span><span class=n>option</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=k>const</span> <span class=n>QWidget</span> <span class=o>*</span><span class=n>widget</span> <span class=o>=</span> <span class=n>option</span><span class=p>.</span><span class=n>widget</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>initStyleOption</span><span class=p>(</span><span class=o>&amp;</span><span class=n>itemOption</span><span class=p>,</span> <span class=n>index</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>QStyle</span> <span class=o>*</span><span class=n>style</span> <span class=o>=</span> <span class=n>widget</span> <span class=o>?</span> <span class=n>widget</span><span class=o>-&gt;</span><span class=n>style</span><span class=p>()</span> <span class=o>:</span> <span class=n>QApplication</span><span class=o>::</span><span class=n>style</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>style</span><span class=o>-&gt;</span><span class=n>drawControl</span><span class=p>(</span><span class=n>QStyle</span><span class=o>::</span><span class=n>CE_ItemViewItem</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                           <span class=o>&amp;</span><span class=n>itemOption</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                           <span class=n>painter</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                           <span class=n>widget</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>QSize</span> <span class=n>MyTableDelegate</span><span class=o>::</span><span class=n>sizeHint</span><span class=p>(</span><span class=k>const</span> <span class=n>QStyleOptionViewItem</span> <span class=o>&amp;</span><span class=n>option</span><span class=p>,</span> <span class=k>const</span> <span class=n>QModelIndex</span> <span class=o>&amp;</span><span class=n>index</span><span class=p>)</span> <span class=k>const</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>height</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=kt>int</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>rowSpacing</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=p>(</span><span class=nb>true</span> <span class=o>==</span> <span class=n>index</span><span class=p>.</span><span class=n>isValid</span><span class=p>())</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>QString</span> <span class=n>currentText</span> <span class=o>=</span> <span class=n>index</span><span class=p>.</span><span class=n>data</span><span class=p>().</span><span class=n>toString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>        <span class=n>QTableWidget</span><span class=o>*</span> <span class=n>parent</span> <span class=o>=</span> <span class=k>static_cast</span><span class=o>&lt;</span><span class=n>QTableWidget</span><span class=o>*&gt;</span> <span class=p>(</span><span class=k>this</span><span class=o>-&gt;</span><span class=n>parent</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=p>(</span><span class=k>nullptr</span> <span class=o>!=</span>  <span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>QFontMetrics</span> <span class=nf>metrics</span><span class=p>(</span><span class=n>parent</span><span class=o>-&gt;</span><span class=n>font</span><span class=p>());</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>fontHeight</span> <span class=o>=</span> <span class=n>parent</span><span class=o>-&gt;</span><span class=n>font</span><span class=p>().</span><span class=n>pixelSize</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=p>(</span><span class=nb>true</span> <span class=o>==</span> <span class=n>currentText</span><span class=p>.</span><span class=n>isEmpty</span><span class=p>())</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>currentText</span> <span class=o>=</span> <span class=s>&#34;H&#34;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>QSize</span> <span class=n>textSize</span> <span class=o>=</span>  <span class=n>metrics</span><span class=p>.</span><span class=n>size</span><span class=p>(</span><span class=n>Qt</span><span class=o>::</span><span class=n>TextSingleLine</span><span class=p>,</span> <span class=n>currentText</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>textHeight</span> <span class=o>=</span> <span class=n>textSize</span><span class=p>.</span><span class=n>height</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>textWidth</span>  <span class=o>=</span> <span class=n>textSize</span><span class=p>.</span><span class=n>width</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>width</span> <span class=o>=</span> <span class=n>parent</span><span class=o>-&gt;</span><span class=n>columnWidth</span><span class=p>(</span><span class=n>index</span><span class=p>.</span><span class=n>column</span><span class=p>());</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span>  <span class=p>(</span><span class=nb>true</span> <span class=o>==</span> <span class=n>parent</span><span class=o>-&gt;</span><span class=n>wordWrap</span><span class=p>()</span>
</span></span><span class=line><span class=cl>                <span class=o>&amp;&amp;</span> <span class=p>(</span> <span class=n>width</span> <span class=o>&lt;=</span> <span class=n>textWidth</span> <span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>QString</span> <span class=n>qStrSliced</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>iStartPos</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=kt>int</span> <span class=n>iLineCount</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>iChar</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>iChar</span> <span class=o>&lt;=</span> <span class=n>currentText</span><span class=p>.</span><span class=n>size</span><span class=p>();</span> <span class=n>iChar</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                <span class=p>{</span>
</span></span><span class=line><span class=cl>                    <span class=n>qStrSliced</span> <span class=o>=</span> <span class=n>currentText</span><span class=p>.</span><span class=n>sliced</span><span class=p>(</span> <span class=n>iStartPos</span><span class=p>,</span> <span class=n>iChar</span> <span class=o>-</span> <span class=n>iStartPos</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                    <span class=kt>int</span> <span class=n>iSlicedWidth</span> <span class=o>=</span> <span class=n>metrics</span><span class=p>.</span><span class=n>size</span><span class=p>(</span> <span class=n>Qt</span><span class=o>::</span><span class=n>TextSingleLine</span><span class=p>,</span> <span class=n>qStrSliced</span> <span class=p>).</span><span class=n>width</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    <span class=k>if</span><span class=p>(</span> <span class=n>iSlicedWidth</span> <span class=o>&gt;=</span> <span class=n>width</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                    <span class=p>{</span>
</span></span><span class=line><span class=cl>                        <span class=kt>int</span> <span class=n>iLastSpacePos</span> <span class=o>=</span> <span class=n>iStartPos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span><span class=p>(</span> <span class=nb>true</span> <span class=o>==</span> <span class=n>qStrSliced</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span> <span class=n>QChar</span><span class=o>::</span><span class=n>Space</span> <span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=n>iLastSpacePos</span> <span class=o>+=</span> <span class=n>qStrSliced</span><span class=p>.</span><span class=n>lastIndexOf</span><span class=p>(</span> <span class=n>QChar</span><span class=o>::</span><span class=n>Space</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                            <span class=k>if</span> <span class=p>(</span> <span class=n>iLastSpacePos</span> <span class=o>!=</span> <span class=n>iStartPos</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=p>{</span>
</span></span><span class=line><span class=cl>                                <span class=n>iChar</span> <span class=o>=</span> <span class=n>iLastSpacePos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                            <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=k>else</span> <span class=nf>if</span><span class=p>(</span> <span class=nb>true</span> <span class=o>==</span> <span class=n>qStrSliced</span><span class=p>.</span><span class=n>contains</span><span class=p>(</span> <span class=n>QChar</span><span class=o>::</span><span class=n>LineFeed</span> <span class=p>)</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span>
</span></span><span class=line><span class=cl>                            <span class=n>iLastSpacePos</span> <span class=o>+=</span> <span class=n>qStrSliced</span><span class=p>.</span><span class=n>lastIndexOf</span><span class=p>(</span> <span class=n>QChar</span><span class=o>::</span><span class=n>LineFeed</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                            <span class=k>if</span> <span class=p>(</span> <span class=n>iLastSpacePos</span> <span class=o>!=</span> <span class=n>iStartPos</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=p>{</span>
</span></span><span class=line><span class=cl>                                <span class=n>iChar</span> <span class=o>=</span> <span class=n>iLastSpacePos</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                            <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=k>else</span>
</span></span><span class=line><span class=cl>                        <span class=p>{</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                        <span class=p>}</span>
</span></span><span class=line><span class=cl>                        <span class=n>iStartPos</span> <span class=o>=</span> <span class=n>iChar</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                        <span class=n>iLineCount</span><span class=o>++</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    <span class=p>}</span>
</span></span><span class=line><span class=cl>                <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=n>height</span> <span class=o>=</span>  <span class=n>iLineCount</span> <span class=o>*</span> <span class=n>textHeight</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>height</span> <span class=o>=</span> <span class=p>(</span> <span class=p>(</span><span class=n>currentText</span><span class=p>.</span><span class=n>count</span><span class=p>(</span><span class=s>&#34;</span><span class=se>\n</span><span class=s>&#34;</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=o>*</span> <span class=n>fontHeight</span><span class=p>)</span> <span class=o>+</span> <span class=mi>2</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>height</span> <span class=o>+=</span>  <span class=n>rowSpacing</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>width</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>max</span><span class=p>(</span> <span class=mi>0</span><span class=p>,</span> <span class=n>width</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>height</span> <span class=o>=</span> <span class=n>std</span><span class=o>::</span><span class=n>max</span><span class=p>(</span> <span class=mi>0</span><span class=p>,</span> <span class=n>height</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nf>QSize</span><span class=p>(</span><span class=n>width</span><span class=p>,</span> <span class=n>height</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>E uma classe adapter do QTableWidget é criada com nome MyTable:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=c1>// header
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=cp>#ifndef MYTABLE_H
</span></span></span><span class=line><span class=cl><span class=cp>#define MYTABLE_H
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QTableWidget&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>class</span> <span class=nc>MyTable</span> <span class=o>:</span> <span class=k>public</span> <span class=n>QTableWidget</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>Q_OBJECT</span>
</span></span><span class=line><span class=cl><span class=k>public</span><span class=o>:</span>
</span></span><span class=line><span class=cl>    <span class=k>explicit</span> <span class=n>MyTable</span><span class=p>(</span><span class=n>QWidget</span> <span class=o>*</span><span class=n>parent</span> <span class=o>=</span> <span class=k>nullptr</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>QString</span> <span class=nf>GetRandomString</span><span class=p>()</span> <span class=k>const</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>PopulateDummyTable</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nl>signals</span><span class=p>:</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=cp>#endif </span><span class=c1>// MYTABLE_H
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=c1>// CPP
</span></span></span><span class=line><span class=cl><span class=c1></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;MyTable.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;MyTableDelegate.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QRandomGenerator&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>MyTable</span><span class=o>::</span><span class=n>MyTable</span><span class=p>(</span><span class=n>QWidget</span> <span class=o>*</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=n>QTableWidget</span><span class=p>{</span><span class=n>parent</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>this</span><span class=o>-&gt;</span><span class=n>setItemDelegate</span><span class=p>(</span> <span class=k>new</span> <span class=n>MyTableDelegate</span><span class=p>(</span> <span class=k>this</span> <span class=p>)</span> <span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>QString</span> <span class=n>MyTable</span><span class=o>::</span><span class=n>GetRandomString</span><span class=p>()</span> <span class=k>const</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=n>QString</span> <span class=nf>possibleCharacters</span><span class=p>(</span><span class=s>&#34;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>randomWordLength</span> <span class=o>=</span> <span class=mi>5</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>randomWordCount</span> <span class=o>=</span> <span class=mi>8</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>QString</span> <span class=n>randomString</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>wordCount</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>wordCount</span> <span class=o>&lt;</span> <span class=n>randomWordCount</span><span class=p>;</span> <span class=o>++</span><span class=n>wordCount</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>wordLength</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>wordLength</span> <span class=o>&lt;</span> <span class=n>randomWordLength</span><span class=p>;</span> <span class=o>++</span><span class=n>wordLength</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=kt>int</span> <span class=n>index</span> <span class=o>=</span> <span class=n>QRandomGenerator</span><span class=o>::</span><span class=n>global</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>generate</span><span class=p>()</span> <span class=o>%</span> <span class=n>possibleCharacters</span><span class=p>.</span><span class=n>length</span><span class=p>();</span>
</span></span><span class=line><span class=cl>            <span class=n>QChar</span> <span class=n>nextChar</span> <span class=o>=</span> <span class=n>possibleCharacters</span><span class=p>.</span><span class=n>at</span><span class=p>(</span><span class=n>index</span><span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=n>randomString</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=n>nextChar</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>randomString</span><span class=p>.</span><span class=n>append</span><span class=p>(</span><span class=s>&#34; &#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>randomString</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kt>void</span> <span class=n>MyTable</span><span class=o>::</span><span class=n>PopulateDummyTable</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>row</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>row</span> <span class=o>&lt;</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>rowCount</span><span class=p>();</span> <span class=n>row</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>column</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>column</span> <span class=o>&lt;</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>columnCount</span><span class=p>();</span> <span class=n>column</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=n>QString</span> <span class=n>randomString</span> <span class=o>=</span> <span class=n>GetRandomString</span><span class=p>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=n>QTableWidgetItem</span><span class=o>*</span> <span class=n>tableItem</span> <span class=o>=</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>item</span><span class=p>(</span> <span class=n>row</span><span class=p>,</span> <span class=n>column</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span><span class=p>(</span> <span class=n>tableItem</span> <span class=o>==</span> <span class=k>nullptr</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tableItem</span> <span class=o>=</span> <span class=k>new</span> <span class=n>QTableWidgetItem</span><span class=p>(</span> <span class=n>randomString</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>                <span class=k>this</span><span class=o>-&gt;</span><span class=n>setItem</span><span class=p>(</span> <span class=n>row</span><span class=p>,</span> <span class=n>column</span><span class=p>,</span> <span class=n>tableItem</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span>
</span></span><span class=line><span class=cl>            <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=n>tableItem</span><span class=o>-&gt;</span><span class=n>setText</span><span class=p>(</span> <span class=n>randomString</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>            <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=k>this</span><span class=o>-&gt;</span><span class=n>setRowHeight</span><span class=p>(</span> <span class=n>row</span><span class=p>,</span> <span class=k>this</span><span class=o>-&gt;</span><span class=n>sizeHintForRow</span><span class=p>(</span><span class=n>row</span><span class=p>)</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>A Main Window:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-cpp data-lang=cpp><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;mainwindow.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;./ui_mainwindow.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&#34;MyTable.h&#34;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=cp>#include</span> <span class=cpf>&lt;QHeaderView&gt;</span><span class=cp>
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=n>MainWindow</span><span class=o>::</span><span class=n>MainWindow</span><span class=p>(</span><span class=n>QWidget</span> <span class=o>*</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=n>QMainWindow</span><span class=p>(</span><span class=n>parent</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>,</span> <span class=n>ui</span><span class=p>(</span><span class=k>new</span> <span class=n>Ui</span><span class=o>::</span><span class=n>MainWindow</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=n>ui</span><span class=o>-&gt;</span><span class=n>setupUi</span><span class=p>(</span><span class=k>this</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>setWindowTitle</span><span class=p>(</span> <span class=s>&#34;Word Wrap Delegate&#34;</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>MyTable</span> <span class=o>*</span><span class=n>tableWidget</span> <span class=o>=</span> <span class=k>new</span> <span class=n>MyTable</span> <span class=p>(</span> <span class=n>ui</span><span class=o>-&gt;</span><span class=n>centralwidget</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setRowCount</span><span class=p>(</span> <span class=mi>5</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setColumnCount</span><span class=p>(</span> <span class=mi>5</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setGeometry</span><span class=p>(</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>640</span><span class=p>,</span> <span class=mi>480</span> <span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>const</span> <span class=kt>int</span> <span class=n>width</span> <span class=o>=</span> <span class=mi>100</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span><span class=p>(</span> <span class=kt>int</span> <span class=n>column</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span> <span class=n>column</span> <span class=o>&lt;</span> <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>columnCount</span><span class=p>();</span> <span class=n>column</span><span class=o>++</span> <span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>setColumnWidth</span><span class=p>(</span><span class=n>column</span><span class=p>,</span> <span class=n>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>        <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>horizontalHeader</span><span class=p>()</span><span class=o>-&gt;</span><span class=n>resizeSection</span><span class=p>(</span><span class=n>column</span><span class=p>,</span> <span class=n>width</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>tableWidget</span><span class=o>-&gt;</span><span class=n>PopulateDummyTable</span><span class=p>();</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>MainWindow</span><span class=o>::~</span><span class=n>MainWindow</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>delete</span> <span class=n>ui</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><h2 id=resultado>Resultado<a hidden class=anchor aria-hidden=true href=#resultado>#</a></h2><p>O resultado pode ser visto na figura abaixo, em que na esquerda a função do Word Wrap foi utilizada e na direita os <code>delegates</code>.</p><p>Com os <code>delegates</code> o espaçamento da margem ficou mais personalizado e menor, pois a variável <code>rowspacing</code> é igual a zero.</p><p><img loading=lazy src=/posts/images/table-widget-word-wrap/Resultado.PNG alt=Resultado></p><h2 id=referências>Referências<a hidden class=anchor aria-hidden=true href=#referências>#</a></h2><ul><li><a href=https://doc.qt.io/qt-6/qtextoption.html#WrapMode-enum>Wrap Mode Enum</a></li></ul><ul><li><a href=https://doc.qt.io/qt-6/qtablewidget.html>QTableWidget</a></li></ul><ul><li><a href=https://github.com/danieltak/danieltak-blog/blob/master/exemplos/TableWordWrapProblem>Exemplo QTableWidget</a></li></ul><ul><li><a href=https://github.com/danieltak/danieltak-blog/blob/master/exemplos/TableWordWrap>Exemplo Delegate</a></li></ul><ul><li><a href=https://doc.qt.io/qt-6/qabstractitemdelegate.html>QAbstractItemDelegate</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://danieltak.com.br/tags/qt/>Qt</a></li><li><a href=https://danieltak.com.br/tags/gui/>GUI</a></li><li><a href=https://danieltak.com.br/tags/tabela/>Tabela</a></li></ul><nav class=paginav><a class=prev href=https://danieltak.com.br/posts/estudo-tempo/><span class=title>« Página Anterior</span><br><span>Um Estudo sobre o Tempo</span>
</a><a class=next href=https://danieltak.com.br/posts/distancia-dois-pontos-esfera/><span class=title>Próxima Página »</span><br><span>Distância entre Dois Pontos de uma Esfera</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on x" href="https://x.com/intent/tweet/?text=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget&amp;url=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f&amp;hashtags=Qt%2cGUI%2cTabela"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f&amp;title=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget&amp;summary=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget&amp;source=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f&title=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on whatsapp" href="https://api.whatsapp.com/send?text=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget%20-%20https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on telegram" href="https://telegram.me/share/url?text=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget&amp;url=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Quebra de Texto num Widget de Table usando QWidget on ycombinator" href="https://news.ycombinator.com/submitlink?t=Quebra%20de%20Texto%20num%20Widget%20de%20Table%20usando%20QWidget&u=https%3a%2f%2fdanieltak.com.br%2fposts%2ftable-widget-word-wrap%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://danieltak.com.br/>danieltak</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>